<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment - ShopEase</title>
    <link rel="stylesheet" href="./payment.css">
    <script src="payment.js" defer></script>
</head>
<body>

    <nav>
        <div class="logo">ShopEase</div>
        <ul>
            <li><a href="home.html">Home</a></li>
            <li><a href="cart.html">Cart</a></li>
        </ul>
    </nav>

    <section class="payment">
        <h2>Payment Details</h2>
        <form id="paymentForm">
            <input type="hidden" id="userId" value="USER_ID_HERE">
            <label for="cardNumber">Card Number:</label>
            <input type="text" id="cardNumber" placeholder="1234 5678 9012 3456" required>

            <label for="expiry">Expiry Date:</label>
            <input type="text" id="expiry" placeholder="MM/YY" required>

            <label for="cvv">CVV:</label>
            <input type="text" id="cvv" placeholder="123" required>

            <button type="submit">Pay Now</button>
        </form>
    </section>

    <footer>
        <p>&copy; 2025 ShopEase. All rights reserved.</p>
    </footer>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const paymentForm = document.getElementById("paymentForm");

            paymentForm.addEventListener("submit", async function (event) {
                event.preventDefault();

                const userId = document.getElementById("userId").value;
                const cardNumber = document.getElementById("cardNumber").value;
                const expiry = document.getElementById("expiry").value;
                const cvv = document.getElementById("cvv").value;

                // Simulate getting a token from Stripe (replace with actual Stripe token generation)
                const token = "simulated_stripe_token";

                const response = await fetch("/api/payment/pay", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        userId,
                        amount: 1000, // Replace with actual amount
                        token
                    })
                });

                const result = await response.json();
                if (response.ok) {
                    alert("Payment successful!");
                } else {
                    alert("Payment failed: " + result.error);
                }
            });
        });
    </script>

</body>
</html>